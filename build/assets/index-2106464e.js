import{s as N,T as B,j as e,F as r,h as C,r as s,b as L}from"./index-8a12d07f.js";import{B as b}from"./index-6c710d98.js";import{u as x}from"./index-7c4aea71.js";import{o as v,N as F,F as k,B as z,C as D,m as I,r as M}from"./react-toastify.esm-93f93bff.js";import{u as R}from"./index-db023ead.js";import{T as _}from"./index-aa3a38ea.js";import{S as A}from"./Skeleton-e3e8c059.js";import"./index.esm-b5fe068c.js";import"./InfoIcon-537b5032.js";const P=()=>e.jsxs(r,{children:[e.jsx(r,{align:"center",direction:"row",justify:"space-between",mb:18,children:e.jsx(r,{align:"center",direction:"row",children:e.jsx(V,{children:"Edit node name"})})}),e.jsx(r,{mb:12,children:e.jsx(_,{id:"cy-topic",maxLength:50,name:"topic",placeholder:"Node name",rules:{...C}})})]}),V=N(B)`
  font-size: 22px;
  font-weight: 600;
  font-family: 'Barlow';
`,q=()=>{const{close:i}=x("editNodeName"),[h]=R(a=>[a.data]),c=v({mode:"onChange"}),{watch:j,setValue:d,reset:l}=c,[m,p]=s.useState(!1),[f,u]=s.useState(!1),[t,y]=s.useState(),o=F();s.useEffect(()=>(t&&d("topic",t==null?void 0:t.topic),()=>{l()}),[t,d,l]),s.useEffect(()=>{(async()=>{if(o){u(!0);try{const{data:n}=await I({search:o==null?void 0:o.name}),E=n.find(w=>w.topic===o.name);y(E)}catch(n){console.error(n)}finally{u(!1)}}})()},[o]);const S=j("topic"),g=()=>{i()},T=async()=>{p(!0);try{await M((t==null?void 0:t.ref_id)||"",{topic:S.trim()}),g()}catch(a){console.warn(a)}finally{p(!1)}};return e.jsxs(k,{...c,children:[f?e.jsx(r,{my:24,children:e.jsx(A,{})}):e.jsx(P,{}),e.jsxs(z,{color:"secondary",disabled:m||f,onClick:T,size:"large",variant:"contained",children:["Save",m&&e.jsx(D,{color:L.BLUE_PRESS_STATE,size:10})]})]})},Y=()=>{const{close:i}=x("editNodeName");return e.jsx(b,{id:"editNodeName",kind:"regular",onClose:i,preventOutsideClose:!0,children:e.jsx(q,{})})};export{Y as EditNodeNameModal};
