import{_ as y,r as f,a as J,j as s,c as R,u as pe,ag as U,ah as Q,S as ce,W as $e,X as ke,s as S,F as m,T as A,h as ee,b as F,ai as Z,v as Ce,g as Be,k as Te}from"./index-3184f6a8.js";import{B as ue}from"./index-fbbb7e8b.js";import{u as V}from"./index-499757a5.js";import{g as te,a as se,s as N,aD as ze,aE as Re,c as ne,b as ae,av as Fe,e as Ne,X as Me,t as he,h as me,z as Ae,F as fe,C as K,aF as Pe,Y as Ee,I as Ie,B as re,aG as De,aH as Ge,aI as We}from"./react-toastify.esm-a665cfb0.js";import{B as ge,T as Le,a as Oe}from"./index-d8b579bd.js";import{T as _}from"./index-e4eae64b.js";import{A as xe}from"./index-bc7e1471.js";import{O as le,N as Ve}from"./constants-cde8ebc3.js";import{D as _e}from"./DeleteIcon-9d4ad9d8.js";import{P as be}from"./PlusIcon-736ad1c5.js";import{e as qe}from"./Stack-d56120ac.js";import{u as Ue}from"./Popover-d441fcbd.js";import{u as Ke}from"./Select-05131750.js";import{S as He,a as q,b as Xe}from"./index-d3e921d0.js";import{M as Ye,a as Ze}from"./ChevronUpIcon-25313da0.js";import"./useSlotProps-0a22e092.js";import"./index.esm-be4952b8.js";import"./InfoIcon-23a04700.js";import"./index-d50d3a3f.js";import"./Popper-1f8a267c.js";import"./generateCategoricalChart-b121b887.js";import"./index-67fc7434.js";import"./CheckIcon-15d30a0c.js";import"./ChevronDownIcon-c8c4e6e9.js";function Je(e){return te("PrivateSwitchBase",e)}se("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Qe=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],et=e=>{const{classes:t,checked:a,disabled:n,edge:r}=e,o={root:["root",a&&"checked",n&&"disabled",r&&`edge${R(r)}`],input:["input"]};return ae(o,Je,t)},tt=N(ze)(({ownerState:e})=>y({padding:9,borderRadius:"50%"},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12})),st=N("input",{shouldForwardProp:Re})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),nt=f.forwardRef(function(t,a){const{autoFocus:n,checked:r,checkedIcon:o,className:c,defaultChecked:d,disabled:h,disableFocusRipple:l=!1,edge:i=!1,icon:p,id:u,inputProps:g,inputRef:k,name:w,onBlur:j,onChange:x,onFocus:v,readOnly:$,required:H=!1,tabIndex:W,type:z,value:E}=t,L=J(t,Qe),[O,M]=Ke({controlled:r,default:!!d,name:"SwitchBase",state:"checked"}),B=Ue(),we=C=>{v&&v(C),B&&B.onFocus&&B.onFocus(C)},Se=C=>{j&&j(C),B&&B.onBlur&&B.onBlur(C)},je=C=>{if(C.nativeEvent.defaultPrevented)return;const ie=C.target.checked;M(ie),x&&x(C,ie)};let I=h;B&&typeof I>"u"&&(I=B.disabled);const ve=z==="checkbox"||z==="radio",X=y({},t,{checked:O,disabled:I,disableFocusRipple:l,edge:i}),oe=et(X);return s.jsxs(tt,y({component:"span",className:ne(oe.root,c),centerRipple:!0,focusRipple:!l,disabled:I,tabIndex:null,role:void 0,onFocus:we,onBlur:Se,ownerState:X,ref:a},L,{children:[s.jsx(st,y({autoFocus:n,checked:r,defaultChecked:d,className:oe.input,disabled:I,id:ve?u:void 0,name:w,onChange:je,readOnly:$,ref:k,required:H,ownerState:X,tabIndex:W,type:z},z==="checkbox"&&E===void 0?{}:{value:E},g)),O?o:p]}))}),at=nt,rt=f.createContext(),de=rt;function ot(e){return te("MuiGrid",e)}const it=[0,1,2,3,4,5,6,7,8,9,10],ct=["column-reverse","column","row-reverse","row"],lt=["nowrap","wrap-reverse","wrap"],D=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],dt=se("MuiGrid",["root","container","item","zeroMinWidth",...it.map(e=>`spacing-xs-${e}`),...ct.map(e=>`direction-xs-${e}`),...lt.map(e=>`wrap-xs-${e}`),...D.map(e=>`grid-xs-${e}`),...D.map(e=>`grid-sm-${e}`),...D.map(e=>`grid-md-${e}`),...D.map(e=>`grid-lg-${e}`),...D.map(e=>`grid-xl-${e}`)]),G=dt,pt=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function P(e){const t=parseFloat(e);return`${t}${String(e).replace(String(t),"")||"px"}`}function ut({theme:e,ownerState:t}){let a;return e.breakpoints.keys.reduce((n,r)=>{let o={};if(t[r]&&(a=t[r]),!a)return n;if(a===!0)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(a==="auto")o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const c=U({values:t.columns,breakpoints:e.breakpoints.values}),d=typeof c=="object"?c[r]:c;if(d==null)return n;const h=`${Math.round(a/d*1e8)/1e6}%`;let l={};if(t.container&&t.item&&t.columnSpacing!==0){const i=e.spacing(t.columnSpacing);if(i!=="0px"){const p=`calc(${h} + ${P(i)})`;l={flexBasis:p,maxWidth:p}}}o=y({flexBasis:h,flexGrow:0,maxWidth:h},l)}return e.breakpoints.values[r]===0?Object.assign(n,o):n[e.breakpoints.up(r)]=o,n},{})}function ht({theme:e,ownerState:t}){const a=U({values:t.direction,breakpoints:e.breakpoints.values});return Q({theme:e},a,n=>{const r={flexDirection:n};return n.indexOf("column")===0&&(r[`& > .${G.item}`]={maxWidth:"none"}),r})}function ye({breakpoints:e,values:t}){let a="";Object.keys(t).forEach(r=>{a===""&&t[r]!==0&&(a=r)});const n=Object.keys(e).sort((r,o)=>e[r]-e[o]);return n.slice(0,n.indexOf(a))}function mt({theme:e,ownerState:t}){const{container:a,rowSpacing:n}=t;let r={};if(a&&n!==0){const o=U({values:n,breakpoints:e.breakpoints.values});let c;typeof o=="object"&&(c=ye({breakpoints:e.breakpoints.values,values:o})),r=Q({theme:e},o,(d,h)=>{var l;const i=e.spacing(d);return i!=="0px"?{marginTop:`-${P(i)}`,[`& > .${G.item}`]:{paddingTop:P(i)}}:(l=c)!=null&&l.includes(h)?{}:{marginTop:0,[`& > .${G.item}`]:{paddingTop:0}}})}return r}function ft({theme:e,ownerState:t}){const{container:a,columnSpacing:n}=t;let r={};if(a&&n!==0){const o=U({values:n,breakpoints:e.breakpoints.values});let c;typeof o=="object"&&(c=ye({breakpoints:e.breakpoints.values,values:o})),r=Q({theme:e},o,(d,h)=>{var l;const i=e.spacing(d);return i!=="0px"?{width:`calc(100% + ${P(i)})`,marginLeft:`-${P(i)}`,[`& > .${G.item}`]:{paddingLeft:P(i)}}:(l=c)!=null&&l.includes(h)?{}:{width:"100%",marginLeft:0,[`& > .${G.item}`]:{paddingLeft:0}}})}return r}function gt(e,t,a={}){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[a[`spacing-xs-${String(e)}`]];const n=[];return t.forEach(r=>{const o=e[r];Number(o)>0&&n.push(a[`spacing-${r}-${String(o)}`])}),n}const xt=N("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e,{container:n,direction:r,item:o,spacing:c,wrap:d,zeroMinWidth:h,breakpoints:l}=a;let i=[];n&&(i=gt(c,l,t));const p=[];return l.forEach(u=>{const g=a[u];g&&p.push(t[`grid-${u}-${String(g)}`])}),[t.root,n&&t.container,o&&t.item,h&&t.zeroMinWidth,...i,r!=="row"&&t[`direction-xs-${String(r)}`],d!=="wrap"&&t[`wrap-xs-${String(d)}`],...p]}})(({ownerState:e})=>y({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},e.wrap!=="wrap"&&{flexWrap:e.wrap}),ht,mt,ft,ut);function bt(e,t){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[`spacing-xs-${String(e)}`];const a=[];return t.forEach(n=>{const r=e[n];if(Number(r)>0){const o=`spacing-${n}-${String(r)}`;a.push(o)}}),a}const yt=e=>{const{classes:t,container:a,direction:n,item:r,spacing:o,wrap:c,zeroMinWidth:d,breakpoints:h}=e;let l=[];a&&(l=bt(o,h));const i=[];h.forEach(u=>{const g=e[u];g&&i.push(`grid-${u}-${String(g)}`)});const p={root:["root",a&&"container",r&&"item",d&&"zeroMinWidth",...l,n!=="row"&&`direction-xs-${String(n)}`,c!=="wrap"&&`wrap-xs-${String(c)}`,...i]};return ae(p,ot,t)},wt=f.forwardRef(function(t,a){const n=pe({props:t,name:"MuiGrid"}),{breakpoints:r}=Fe(),o=qe(n),{className:c,columns:d,columnSpacing:h,component:l="div",container:i=!1,direction:p="row",item:u=!1,rowSpacing:g,spacing:k=0,wrap:w="wrap",zeroMinWidth:j=!1}=o,x=J(o,pt),v=g||k,$=h||k,H=f.useContext(de),W=i?d||12:H,z={},E=y({},x);r.keys.forEach(M=>{x[M]!=null&&(z[M]=x[M],delete E[M])});const L=y({},o,{columns:W,container:i,direction:p,item:u,rowSpacing:v,columnSpacing:$,wrap:w,zeroMinWidth:j,spacing:k},z,{breakpoints:r.keys}),O=yt(L);return s.jsx(de.Provider,{value:W,children:s.jsx(xt,y({ownerState:L,className:ne(O.root,c),as:l,ref:a},E))})}),T=wt;function St(e){return te("MuiSwitch",e)}const jt=se("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),b=jt,vt=["className","color","edge","size","sx"],$t=e=>{const{classes:t,edge:a,size:n,color:r,checked:o,disabled:c}=e,d={root:["root",a&&`edge${R(a)}`,`size${R(n)}`],switchBase:["switchBase",`color${R(r)}`,o&&"checked",c&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},h=ae(d,St,t);return y({},t,h)},kt=N("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.edge&&t[`edge${R(a.edge)}`],t[`size${R(a.size)}`]]}})(({ownerState:e})=>y({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},e.edge==="start"&&{marginLeft:-8},e.edge==="end"&&{marginRight:-8},e.size==="small"&&{width:40,height:24,padding:7,[`& .${b.thumb}`]:{width:16,height:16},[`& .${b.switchBase}`]:{padding:4,[`&.${b.checked}`]:{transform:"translateX(16px)"}}})),Ct=N(at,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.switchBase,{[`& .${b.input}`]:t.input},a.color!=="default"&&t[`color${R(a.color)}`]]}})(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${b.checked}`]:{transform:"translateX(20px)"},[`&.${b.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${b.checked} + .${b.track}`]:{opacity:.5},[`&.${b.disabled} + .${b.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:`${e.palette.mode==="light"?.12:.2}`},[`& .${b.input}`]:{left:"-100%",width:"300%"}}),({theme:e,ownerState:t})=>y({"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:ce(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${b.checked}`]:{color:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ce(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${b.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${t.color}DisabledColor`]:`${e.palette.mode==="light"?$e(e.palette[t.color].main,.62):ke(e.palette[t.color].main,.55)}`}},[`&.${b.checked} + .${b.track}`]:{backgroundColor:(e.vars||e).palette[t.color].main}})),Bt=N("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${e.palette.mode==="light"?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:`${e.palette.mode==="light"?.38:.3}`})),Tt=N("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),zt=f.forwardRef(function(t,a){const n=pe({props:t,name:"MuiSwitch"}),{className:r,color:o="primary",edge:c=!1,size:d="medium",sx:h}=n,l=J(n,vt),i=y({},n,{color:o,edge:c,size:d}),p=$t(i),u=s.jsx(Tt,{className:p.thumb,ownerState:i});return s.jsxs(kt,{className:ne(p.root,r),sx:h,ownerState:i,children:[s.jsx(Ct,y({type:"checkbox",icon:u,checkedIcon:u,ref:a,ownerState:i},l,{classes:y({},p,{root:p.switchBase})})),s.jsx(Bt,{className:p.track,ownerState:i})]})}),Rt=zt,Ft=({onClose:e})=>{const[t]=Ne(n=>[n.graphStyle]),a=()=>{localStorage.setItem("graphStyle",t),e()};return s.jsxs(Nt,{direction:"column",children:[s.jsx(Mt,{children:"Default graph view:"}),s.jsx(Me,{}),s.jsx(m,{mt:308,children:s.jsx(ge,{kind:"big",onClick:a,children:"Save changes"})})]})},Nt=S(m)`
  display: flex;
  gap: 10px;
  padding: 36px;
`,Mt=S(A)`
  font-family: Barlow;
  font-size: 13px;
  font-weight: 400;
`,At=({initialValues:e})=>{const t=he({defaultValues:e,mode:"onSubmit"}),{isSubmitting:a}=t.formState,n=me(o=>o.setAppMetaData),r=t.handleSubmit(async o=>{try{(await Ae(o)).status==="success"&&n(o)}catch(c){console.log(c),console.warn(c)}});return s.jsx(fe,{...t,children:s.jsx(Et,{id:"add-node-form",onSubmit:r,children:s.jsxs(s.Fragment,{children:[s.jsxs(m,{children:[s.jsx(m,{pt:20,children:s.jsx(_,{id:"cy-about-title-id",label:"Graph Title",maxLength:50,name:"title",placeholder:"Type graph title here...",rules:{...ee}})}),s.jsx(m,{pt:20,children:s.jsx(_,{id:"cy-about-id",label:"Graph Description",maxLength:100,name:"description",placeholder:"Type graph description here..."})})]}),s.jsx(m,{mt:210,py:24,children:a?s.jsx(Pt,{children:s.jsx(K,{color:F.white,size:20})}):s.jsx(ge,{disabled:a,id:"add-node-submit-cta",kind:"big",type:"submit",children:"Save changes"})})]})})})},Pt=S(m).attrs({align:"center",background:"primaryButton",borderRadius:8,justify:"center"})`
  padding: 16px 24px;
  opacity: 0.5;
`,Et=S.form`
  padding: 36px;
`;function It(e){const t={};return e.forEach(a=>{const{key:n,type:r,required:o}=a;o?t[n]=r:t[n]=`?${r}`}),t}function Dt(e){return Object.keys(e).map(t=>({required:!e[t].includes("?"),type:e[t].includes("?")?e[t].slice(1):e[t],key:t})).filter(({key:t})=>!["type","ref_id","parent"].includes(t))}const Gt=({parentParam:e})=>{const[t,a]=f.useState(!1),[n,r]=f.useState([]),{fields:o,append:c,replace:d,remove:h}=Pe({name:"attributes"}),{setValue:l,watch:i}=Ee();return f.useEffect(()=>{const p=async()=>{try{let u=[{required:!1,type:"string",key:""}];if(e!==Ve.value.toLowerCase()){a(!0);const g=await De(e);u=Dt(g)}d(u),r(u)}catch(u){console.warn(u)}finally{a(!1)}};n.length===0&&p()},[e,l,d,n.length]),s.jsxs(s.Fragment,{children:[t?s.jsx(m,{align:"center",children:s.jsx(K,{color:F.SECONDARY_BLUE,size:"30"})}):s.jsx(Wt,{children:s.jsx(T,{container:!0,spacing:2,children:o.map((p,u)=>{const g=i(`attributes[${u}].type`),k=i(`attributes[${u}].required`);return s.jsxs(f.Fragment,{children:[s.jsx(T,{item:!0,xs:5,children:s.jsx(_,{autoComplete:"off",className:"text-input",id:"cy-item-name",maxLength:50,name:`attributes.${u}.key`,placeholder:"Enter value",rules:{...ee}})}),s.jsx(T,{item:!0,xs:4,children:s.jsx(xe,{onSelect:w=>l(`attributes[${u}].type`,w==null?void 0:w.value),options:le,selectedValue:le.find(w=>w.value===g)})}),s.jsxs(T,{item:!0,xs:3,children:[s.jsx(Rt,{checked:k,disabled:!1,name:`attributes.${u}.required`,onChange:w=>l(`attributes[${u}].required`,w.target.checked),size:"small"}),s.jsx(Ie,{onClick:()=>h(u),children:s.jsx(_e,{})})]})]},p.id)})})}),s.jsx(m,{align:"flex-start",py:12,children:s.jsx(re,{onClick:()=>c({key:"",type:"string",required:!0}),size:"medium",startIcon:s.jsx(be,{}),variant:"contained",children:"Add Attribute"})})]})},Wt=S(m)`
  max-height: 260px;
  overflow: auto;
`,Lt=({parent:e})=>{const t=e;return s.jsxs(m,{children:[s.jsx(m,{direction:"row",mb:10,children:s.jsxs(T,{container:!0,spacing:2,children:[s.jsx(T,{item:!0,xs:5,children:s.jsx(Y,{style:{marginRight:180},children:"Attributes"})}),s.jsx(T,{item:!0,xs:4,children:s.jsx(Y,{style:{marginRight:130},children:"Type"})}),s.jsx(T,{item:!0,xs:3,children:s.jsx(Y,{children:"Required"})})]})}),t&&s.jsx(Gt,{parentParam:t},t)]})},Y=S(A)`
  font-size: 15px;
  color: gray;
`,Ot=async e=>{try{const{attributes:t,...a}=e,n={...a,...It(t)},r=await Ce.post("/schema",JSON.stringify(n),{});if(r.error){const{message:o}=r.error;throw new Error(o)}}catch(t){let a=Z;if(t.status===400){const n=await t.json();a=n.errorCode||(n==null?void 0:n.status)||Z}else t instanceof Error&&(a=t.message);throw new Error(a)}},Vt=({onSchemaCreate:e})=>{const{close:t,visible:a}=V("addType"),n=he({mode:"onChange"}),{watch:r,setValue:o,reset:c}=n,[d,h]=f.useState(!1),[l,i]=f.useState(!1),[p,u]=f.useState(null);f.useEffect(()=>()=>{c()},[a,c]),f.useEffect(()=>{(async()=>{i(!0);try{const v=(await Ge()).schemas.map($=>($==null?void 0:$.type)==="thing"?{label:"No Parent",value:$.type}:{label:$.type,value:$.type});u(v)}catch(x){console.warn(x)}finally{i(!1)}})()},[]);const g=r("parent"),k=()=>{t()},w=n.handleSubmit(async j=>{h(!1);try{await Ot(j),e({type:j.type}),k()}catch(x){if((x==null?void 0:x.status)===400){const v=await x.json();v.errorCode||v!=null&&v.status||Z}else x instanceof Error&&x.message}finally{h(!1)}});return s.jsx(ue,{id:"addType",kind:"regular",onClose:t,preventOutsideClose:!0,children:s.jsx(fe,{...n,children:s.jsxs("form",{id:"add-type-form",onSubmit:w,children:[s.jsxs(m,{children:[s.jsx(m,{align:"center",direction:"row",justify:"space-between",mb:18,children:s.jsx(m,{align:"center",direction:"row",children:s.jsx(A,{children:"Enter details"})})}),s.jsx(m,{mb:20,children:s.jsx(A,{children:"Select Parent"})}),s.jsx(m,{direction:"row",mb:20,children:s.jsx(xe,{autoFocus:!0,isLoading:l,onSelect:j=>o("parent",(j==null?void 0:j.value)||""),options:p})}),s.jsx(m,{mb:4,children:s.jsx(A,{children:"Type name"})}),s.jsx(m,{mb:12,children:s.jsx(_,{id:"cy-item-name",maxLength:250,name:"type",placeholder:"Enter type name",rules:{...ee},value:g})})]}),s.jsx(Lt,{parent:g}),s.jsx(m,{direction:"row",justify:"center",mt:20,children:s.jsx(re,{color:"secondary",disabled:d,onClick:w,size:"large",startIcon:d?s.jsx(K,{color:F.white,size:24}):null,variant:"contained",children:"Save"})})]})})})};function _t(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}const qt=({schema:e})=>s.jsxs(He,{children:[s.jsx(q,{className:"empty"}),s.jsx(q,{children:_t(e.type??"")})]}),Ut=f.memo(qt),Kt=({schemas:e})=>{const{open:t}=V("addType"),a=async()=>{t()};return s.jsxs(s.Fragment,{children:[s.jsxs(Ye,{component:"table",children:[s.jsx(Xe,{children:s.jsxs(Ze,{component:"tr",children:[s.jsx(q,{className:"empty"}),s.jsx(q,{children:"Type"})]})}),s.jsx("tbody",{children:e==null?void 0:e.map(n=>s.jsx(Ut,{schema:n},n==null?void 0:n.ref_id))})]}),s.jsx(Ht,{children:s.jsx(re,{color:"secondary",endIcon:s.jsx(be,{}),onClick:a,size:"medium",type:"submit",variant:"contained",children:"Create New Type"})})]})},Ht=S(m)`
  display: flex;
  margin: 20px 0px 0px 30px;
  width: 28%;
`,Xt=()=>{const[e,t]=f.useState(!0),[a,n]=f.useState([]);f.useEffect(()=>{(async()=>{try{const c=await We();n(c.schemas),t(!1)}catch(c){console.error("Error fetching data:",c),t(!1)}})()},[]);const r=o=>{n([...a,o])};return s.jsxs(Yt,{align:e?"center":"flex-start",justify:e?"center":"flex-start",py:16,children:[e?s.jsx(K,{color:F.white}):s.jsx(s.Fragment,{children:s.jsx(Kt,{schemas:a})}),s.jsx(Vt,{onSchemaCreate:r})]})},Yt=S(m)`
  min-height: 0;
  overflow: auto;
  flex: 1;
  width: 100%;
`,Zt=e=>{const{children:t,value:a,index:n,...r}=e;return a===n?s.jsx(ns,{"aria-labelledby":`simple-tab-${n}`,hidden:a!==n,id:`simple-tabpanel-${n}`,role:"tabpanel",...r,children:t}):null};function Jt(e){return{id:`simple-tab-${e}`,"aria-controls":`simple-tabpanel-${e}`}}const Qt=({onClose:e})=>{const[t,a]=f.useState(0),[n]=Be(i=>[i.isAdmin,i.setPubKey]),r=Te(i=>i.customSchemaFlag),o=me(i=>i.appMetaData),c=()=>n?"Admin Settings":"Settings",d=({children:i})=>s.jsxs(ts,{children:[s.jsx(m,{direction:"row",pt:3,children:s.jsx(rs,{"data-testid":"setting-label",children:c()})}),i]}),h=(i,p)=>{a(p)},l=[...n?[{label:"General",component:At}]:[],{label:"Appearance",component:Ft},...n&&r?[{label:"Graph Blueprint",component:Xt}]:[]];return s.jsxs(as,{direction:"column",children:[s.jsx(d,{children:s.jsx(es,{"aria-label":"settings tabs",onChange:h,value:t,children:l.map((i,p)=>s.jsx(ss,{disableRipple:!0,label:i.label,...Jt(p)},i.label))})}),l.map((i,p)=>s.jsx(Zt,{index:p,value:t,children:s.jsx(i.component,{initialValues:o,onClose:e})},i.label))]})},es=S(Le)`
  && {
    .MuiTabs-indicator {
      background: ${F.primaryBlue};
    }
    width: 90%;
  }
`,ts=S(m)`
  background: rgb(22, 24, 30);
  padding: 40px 36px 0 0;
`,ss=S(Oe)`
  && {
    padding: 30px 0 24px;
    color: ${F.GRAY6};
    margin-left: 10px;
    font-family: Barlow;
    font-size: 16px;
    font-style: normal;
    font-weight: 500;
    text-align: center;

    &.Mui-selected {
      color: ${F.white};
    }
    flex-grow: 1;
  }
`,ns=S(m)`
  display: flex;
  flex: 1;
  min-height: 495px;
  max-height: 495px;
  height: fit-content;
  min-width: 480px;
`,as=S(m)`
  min-height: 0;
  flex: 1;
`,rs=S(A)`
  font-size: 22px;
  font-weight: 600;
  font-family: Barlow;
  padding: 0 0 0 36px;
`,Rs=()=>{const{close:e}=V("settings"),{visible:t}=V("addItem");return t?null:s.jsx(ue,{background:"BG1",id:"settings",noWrap:!0,onClose:e,children:s.jsx(Qt,{onClose:e})})};export{Rs as SettingsModal};
