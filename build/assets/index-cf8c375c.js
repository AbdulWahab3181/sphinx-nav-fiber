import{Y as E,Z as R,j as e,X as i,r as a,a0 as b}from"./index-95e8eb4a.js";import{u as C,aA as B,az as z,bP as y,cb as I,cu as L,cw as M,bZ as j,cc as O}from"./index-5aab2cbe.js";import{T as _}from"./toastMessage-4e0babdd.js";import{S as k}from"./Skeleton-5fe342ae.js";const A=()=>e.jsx(i,{children:e.jsx(i,{align:"center",direction:"row",justify:"space-between",mb:18,children:e.jsx(i,{align:"center",direction:"row",children:e.jsx(P,{children:"Remove node"})})})}),P=E(R)`
  font-size: 22px;
  font-weight: 600;
  font-family: 'Barlow';
`,u=(l,n)=>{j(e.jsx(_,{message:l}),{icon:!1,position:j.POSITION.BOTTOM_CENTER,type:n})},D=()=>{const{close:l}=C("removeNode"),[n,c]=a.useState(!1),[T,p]=B(o=>[o.removeNode,o.setSelectedNode]),[h,x]=a.useState(!1),[d,N]=a.useState(),[f,S]=a.useState(),s=z(),m=()=>{l()};a.useEffect(()=>{(async()=>{if(s){x(!0);try{if(s.type==="topic"){const{data:t}=await L({search:s==null?void 0:s.name}),r=t.find(w=>w.topic===s.name);S(r)}else N(s)}catch(t){console.log(t)}finally{x(!1)}}})()},[s]);const v=async()=>{c(!0);try{u("Topic node removal coming soon","info"),p(null),m()}catch(o){console.warn(o)}finally{c(!1)}},g=async()=>{let o="";const t=d||f;if(t){t!=null&&t.ref_id&&(o=t.ref_id),c(!0);try{await M(o),T(o),p(null),u("Removed Node","success"),m()}catch(r){console.log(r),u("Removed failed, try later","error"),console.warn(r)}finally{c(!1)}}};return e.jsxs(e.Fragment,{children:[e.jsx(A,{}),h?e.jsx(k,{}):e.jsxs(i,{direction:"row",justify:"space-between",children:[e.jsx(y,{color:"secondary",onClick:m,size:"medium",variant:"outlined",children:"Cancel"}),e.jsxs(y,{disabled:n||!d&&!f,onClick:d||f?g:v,size:"medium",variant:"text",children:["Confirm",n&&e.jsx(I,{color:b.BLUE_PRESS_STATE,size:10})]})]})]})},X=()=>e.jsx(O,{id:"removeNode",kind:"small",preventOutsideClose:!0,children:e.jsx(D,{})});export{X as RemoveNodeModal};
