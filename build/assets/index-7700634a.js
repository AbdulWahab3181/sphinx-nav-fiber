import{g as ee,a as te,s as E,_ as j,a7 as Ce,r as x,b as se,j as t,d as ne,c as P,e as oe,u as ue,aT as Be,a_ as K,a$ as re,a5 as le,b0 as Te,b1 as ze,f as b,F as g,T as R,i as Re,k as he,K as Fe,C as ae,h as k,b2 as Ne,b3 as X,U as Q,b4 as Pe,G as Ee,b5 as Ae,x as Me,I as Ie}from"./index-5ef49d62.js";import{B as ge}from"./index-c8995a48.js";import{u as L}from"./index-e99ac89a.js";import{o as De,h as Oe,c as xe,F as me,C as H,p as Ge,i as We,I as fe,B as Y}from"./react-toastify.esm-aa1b4299.js";import{B as be,T as Le,a as Ve}from"./index-4d709c6b.js";import{T as q}from"./index-8c217b7a.js";import{A as ye}from"./index-2fdb1f1a.js";import{p as _e,c as Ue}from"./index-30d16895.js";import{O as de,N as qe}from"./constants-cde8ebc3.js";import{D as Ke}from"./DeleteIcon-bc18e5ef.js";import{P as we}from"./PlusIcon-d011cdac.js";import{e as He}from"./Stack-fd35c23e.js";import{u as Ye,a as Je}from"./Popover-5233e748.js";import{u as Ze}from"./Select-fdbdcb17.js";import{S as Xe,a as I,b as Qe,E as et}from"./index-4610068b.js";import{E as tt}from"./EditIcon-9589ab7a.js";import{M as st,a as nt}from"./ChevronUpIcon-2c22c805.js";import"./useSlotProps-f03f2e4a.js";import"./index.esm-f0e46de8.js";import"./InfoIcon-68d98e01.js";import"./Popper-2c76abc6.js";import"./generateCategoricalChart-feed83cc.js";import"./index-20254aed.js";import"./CheckIcon-77e4e7e5.js";import"./ChevronDownIcon-0f3f66e6.js";function ot(e){return ee("PrivateSwitchBase",e)}te("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const rt=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],at=e=>{const{classes:s,checked:n,disabled:o,edge:r}=e,a={root:["root",n&&"checked",o&&"disabled",r&&`edge${P(r)}`],input:["input"]};return oe(a,ot,s)},it=E(De)(({ownerState:e})=>j({padding:9,borderRadius:"50%"},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12})),ct=E("input",{shouldForwardProp:Ce})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),lt=x.forwardRef(function(s,n){const{autoFocus:o,checked:r,checkedIcon:a,className:l,defaultChecked:p,disabled:d,disableFocusRipple:c=!1,edge:i=!1,icon:u,id:h,inputProps:m,inputRef:C,name:f,onBlur:A,onChange:T,onFocus:N,readOnly:O,required:y=!1,tabIndex:S,type:v,value:$}=s,_=se(s,rt),[U,M]=Ze({controlled:r,default:!!p,name:"SwitchBase",state:"checked"}),z=Ye(),Se=B=>{N&&N(B),z&&z.onFocus&&z.onFocus(B)},ve=B=>{A&&A(B),z&&z.onBlur&&z.onBlur(B)},$e=B=>{if(B.nativeEvent.defaultPrevented)return;const ce=B.target.checked;M(ce),T&&T(B,ce)};let G=d;z&&typeof G>"u"&&(G=z.disabled);const ke=v==="checkbox"||v==="radio",J=j({},s,{checked:U,disabled:G,disableFocusRipple:c,edge:i}),ie=at(J);return t.jsxs(it,j({component:"span",className:ne(ie.root,l),centerRipple:!0,focusRipple:!c,disabled:G,tabIndex:null,role:void 0,onFocus:Se,onBlur:ve,ownerState:J,ref:n},_,{children:[t.jsx(ct,j({autoFocus:o,checked:r,defaultChecked:p,className:ie.input,disabled:G,id:ke?h:void 0,name:f,onChange:$e,readOnly:O,ref:C,required:y,ownerState:J,tabIndex:S,type:v},v==="checkbox"&&$===void 0?{}:{value:$},m)),U?a:u]}))}),dt=lt,pt=x.createContext(),pe=pt;function ut(e){return ee("MuiGrid",e)}const ht=[0,1,2,3,4,5,6,7,8,9,10],gt=["column-reverse","column","row-reverse","row"],xt=["nowrap","wrap-reverse","wrap"],W=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],mt=te("MuiGrid",["root","container","item","zeroMinWidth",...ht.map(e=>`spacing-xs-${e}`),...gt.map(e=>`direction-xs-${e}`),...xt.map(e=>`wrap-xs-${e}`),...W.map(e=>`grid-xs-${e}`),...W.map(e=>`grid-sm-${e}`),...W.map(e=>`grid-md-${e}`),...W.map(e=>`grid-lg-${e}`),...W.map(e=>`grid-xl-${e}`)]),V=mt,ft=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function D(e){const s=parseFloat(e);return`${s}${String(e).replace(String(s),"")||"px"}`}function bt({theme:e,ownerState:s}){let n;return e.breakpoints.keys.reduce((o,r)=>{let a={};if(s[r]&&(n=s[r]),!n)return o;if(n===!0)a={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(n==="auto")a={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const l=K({values:s.columns,breakpoints:e.breakpoints.values}),p=typeof l=="object"?l[r]:l;if(p==null)return o;const d=`${Math.round(n/p*1e8)/1e6}%`;let c={};if(s.container&&s.item&&s.columnSpacing!==0){const i=e.spacing(s.columnSpacing);if(i!=="0px"){const u=`calc(${d} + ${D(i)})`;c={flexBasis:u,maxWidth:u}}}a=j({flexBasis:d,flexGrow:0,maxWidth:d},c)}return e.breakpoints.values[r]===0?Object.assign(o,a):o[e.breakpoints.up(r)]=a,o},{})}function yt({theme:e,ownerState:s}){const n=K({values:s.direction,breakpoints:e.breakpoints.values});return re({theme:e},n,o=>{const r={flexDirection:o};return o.indexOf("column")===0&&(r[`& > .${V.item}`]={maxWidth:"none"}),r})}function je({breakpoints:e,values:s}){let n="";Object.keys(s).forEach(r=>{n===""&&s[r]!==0&&(n=r)});const o=Object.keys(e).sort((r,a)=>e[r]-e[a]);return o.slice(0,o.indexOf(n))}function wt({theme:e,ownerState:s}){const{container:n,rowSpacing:o}=s;let r={};if(n&&o!==0){const a=K({values:o,breakpoints:e.breakpoints.values});let l;typeof a=="object"&&(l=je({breakpoints:e.breakpoints.values,values:a})),r=re({theme:e},a,(p,d)=>{var c;const i=e.spacing(p);return i!=="0px"?{marginTop:`-${D(i)}`,[`& > .${V.item}`]:{paddingTop:D(i)}}:(c=l)!=null&&c.includes(d)?{}:{marginTop:0,[`& > .${V.item}`]:{paddingTop:0}}})}return r}function jt({theme:e,ownerState:s}){const{container:n,columnSpacing:o}=s;let r={};if(n&&o!==0){const a=K({values:o,breakpoints:e.breakpoints.values});let l;typeof a=="object"&&(l=je({breakpoints:e.breakpoints.values,values:a})),r=re({theme:e},a,(p,d)=>{var c;const i=e.spacing(p);return i!=="0px"?{width:`calc(100% + ${D(i)})`,marginLeft:`-${D(i)}`,[`& > .${V.item}`]:{paddingLeft:D(i)}}:(c=l)!=null&&c.includes(d)?{}:{width:"100%",marginLeft:0,[`& > .${V.item}`]:{paddingLeft:0}}})}return r}function St(e,s,n={}){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[n[`spacing-xs-${String(e)}`]];const o=[];return s.forEach(r=>{const a=e[r];Number(a)>0&&o.push(n[`spacing-${r}-${String(a)}`])}),o}const vt=E("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:n}=e,{container:o,direction:r,item:a,spacing:l,wrap:p,zeroMinWidth:d,breakpoints:c}=n;let i=[];o&&(i=St(l,c,s));const u=[];return c.forEach(h=>{const m=n[h];m&&u.push(s[`grid-${h}-${String(m)}`])}),[s.root,o&&s.container,a&&s.item,d&&s.zeroMinWidth,...i,r!=="row"&&s[`direction-xs-${String(r)}`],p!=="wrap"&&s[`wrap-xs-${String(p)}`],...u]}})(({ownerState:e})=>j({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},e.wrap!=="wrap"&&{flexWrap:e.wrap}),yt,wt,jt,bt);function $t(e,s){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[`spacing-xs-${String(e)}`];const n=[];return s.forEach(o=>{const r=e[o];if(Number(r)>0){const a=`spacing-${o}-${String(r)}`;n.push(a)}}),n}const kt=e=>{const{classes:s,container:n,direction:o,item:r,spacing:a,wrap:l,zeroMinWidth:p,breakpoints:d}=e;let c=[];n&&(c=$t(a,d));const i=[];d.forEach(h=>{const m=e[h];m&&i.push(`grid-${h}-${String(m)}`)});const u={root:["root",n&&"container",r&&"item",p&&"zeroMinWidth",...c,o!=="row"&&`direction-xs-${String(o)}`,l!=="wrap"&&`wrap-xs-${String(l)}`,...i]};return oe(u,ut,s)},Ct=x.forwardRef(function(s,n){const o=ue({props:s,name:"MuiGrid"}),{breakpoints:r}=Be(),a=He(o),{className:l,columns:p,columnSpacing:d,component:c="div",container:i=!1,direction:u="row",item:h=!1,rowSpacing:m,spacing:C=0,wrap:f="wrap",zeroMinWidth:A=!1}=a,T=se(a,ft),N=m||C,O=d||C,y=x.useContext(pe),S=i?p||12:y,v={},$=j({},T);r.keys.forEach(M=>{T[M]!=null&&(v[M]=T[M],delete $[M])});const _=j({},a,{columns:S,container:i,direction:u,item:h,rowSpacing:N,columnSpacing:O,wrap:f,zeroMinWidth:A,spacing:C},v,{breakpoints:r.keys}),U=kt(_);return t.jsx(pe.Provider,{value:S,children:t.jsx(vt,j({ownerState:_,className:ne(U.root,l),as:c,ref:n},$))})}),F=Ct;function Bt(e){return ee("MuiSwitch",e)}const Tt=te("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),w=Tt,zt=["className","color","edge","size","sx"],Rt=e=>{const{classes:s,edge:n,size:o,color:r,checked:a,disabled:l}=e,p={root:["root",n&&`edge${P(n)}`,`size${P(o)}`],switchBase:["switchBase",`color${P(r)}`,a&&"checked",l&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},d=oe(p,Bt,s);return j({},s,d)},Ft=E("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:n}=e;return[s.root,n.edge&&s[`edge${P(n.edge)}`],s[`size${P(n.size)}`]]}})(({ownerState:e})=>j({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},e.edge==="start"&&{marginLeft:-8},e.edge==="end"&&{marginRight:-8},e.size==="small"&&{width:40,height:24,padding:7,[`& .${w.thumb}`]:{width:16,height:16},[`& .${w.switchBase}`]:{padding:4,[`&.${w.checked}`]:{transform:"translateX(16px)"}}})),Nt=E(dt,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,s)=>{const{ownerState:n}=e;return[s.switchBase,{[`& .${w.input}`]:s.input},n.color!=="default"&&s[`color${P(n.color)}`]]}})(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${w.checked}`]:{transform:"translateX(20px)"},[`&.${w.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${w.checked} + .${w.track}`]:{opacity:.5},[`&.${w.disabled} + .${w.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:`${e.palette.mode==="light"?.12:.2}`},[`& .${w.input}`]:{left:"-100%",width:"300%"}}),({theme:e,ownerState:s})=>j({"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:le(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},s.color!=="default"&&{[`&.${w.checked}`]:{color:(e.vars||e).palette[s.color].main,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[s.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:le(e.palette[s.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${w.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${s.color}DisabledColor`]:`${e.palette.mode==="light"?Te(e.palette[s.color].main,.62):ze(e.palette[s.color].main,.55)}`}},[`&.${w.checked} + .${w.track}`]:{backgroundColor:(e.vars||e).palette[s.color].main}})),Pt=E("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,s)=>s.track})(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${e.palette.mode==="light"?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:`${e.palette.mode==="light"?.38:.3}`})),Et=E("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,s)=>s.thumb})(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),At=x.forwardRef(function(s,n){const o=ue({props:s,name:"MuiSwitch"}),{className:r,color:a="primary",edge:l=!1,size:p="medium",sx:d}=o,c=se(o,zt),i=j({},o,{color:a,edge:l,size:p}),u=Rt(i),h=t.jsx(Et,{className:u.thumb,ownerState:i});return t.jsxs(Ft,{className:ne(u.root,r),sx:d,ownerState:i,children:[t.jsx(Nt,j({type:"checkbox",icon:h,checkedIcon:h,ref:n,ownerState:i},c,{classes:j({},u,{root:u.switchBase})})),t.jsx(Pt,{className:u.track,ownerState:i})]})}),Mt=At,It=({onClose:e})=>{const[s]=Re(o=>[o.graphStyle]),n=()=>{localStorage.setItem("graphStyle",s),e()};return t.jsxs(Dt,{direction:"column",children:[t.jsx(Ot,{children:"Default graph view:"}),t.jsx(Oe,{}),t.jsx(g,{mt:308,children:t.jsx(be,{kind:"big",onClick:n,children:"Save changes"})})]})},Dt=b(g)`
  display: flex;
  gap: 10px;
  padding: 36px;
`,Ot=b(R)`
  font-family: Barlow;
  font-size: 13px;
  font-weight: 400;
`,Gt=({initialValues:e})=>{const s=xe({defaultValues:e,mode:"onSubmit"}),{isSubmitting:n}=s.formState,o=he(a=>a.setAppMetaData),r=s.handleSubmit(async a=>{try{(await Fe(a)).status==="success"&&o(a)}catch(l){console.log(l),console.warn(l)}});return t.jsx(me,{...s,children:t.jsx(Lt,{id:"add-node-form",onSubmit:r,children:t.jsxs(t.Fragment,{children:[t.jsxs(g,{children:[t.jsx(g,{pt:20,children:t.jsx(q,{id:"cy-about-title-id",label:"Graph Title",maxLength:50,name:"title",placeholder:"Type graph title here...",rules:{...ae}})}),t.jsx(g,{pt:20,children:t.jsx(q,{id:"cy-about-id",label:"Graph Description",maxLength:100,name:"description",placeholder:"Type graph description here..."})})]}),t.jsx(g,{mt:210,py:24,children:n?t.jsx(Wt,{children:t.jsx(H,{color:k.white,size:20})}):t.jsx(be,{disabled:n,id:"add-node-submit-cta",kind:"big",type:"submit",children:"Save changes"})})]})})})},Wt=b(g).attrs({align:"center",background:"primaryButton",borderRadius:8,justify:"center"})`
  padding: 16px 24px;
  opacity: 0.5;
`,Lt=b.form`
  padding: 36px;
`,Vt=/^[a-z0-9_]+$/,_t=({parentParam:e})=>{const[s,n]=x.useState(!1),[o,r]=x.useState([]),{fields:a,append:l,replace:p,remove:d}=Ge({name:"attributes"}),{setValue:c,watch:i}=We();return x.useEffect(()=>{const u=async()=>{try{let h=[{required:!1,type:"string",key:""}];if(e!==qe.value.toLowerCase()){n(!0);const m=await Ne(e);h=_e(m)}p(h),r(h)}catch(h){console.warn(h)}finally{n(!1)}};o.length===0&&u()},[e,c,p,o.length]),t.jsxs(t.Fragment,{children:[s?t.jsx(g,{align:"center",children:t.jsx(H,{color:k.SECONDARY_BLUE,size:"30"})}):t.jsx(Ut,{py:8,children:t.jsx(F,{container:!0,spacing:2,children:a.map((u,h)=>{const m=i(`attributes[${h}].type`),C=i(`attributes[${h}].required`);return t.jsxs(x.Fragment,{children:[t.jsx(F,{item:!0,xs:5,children:t.jsx(q,{autoComplete:"off",className:"text-input",id:"cy-item-name",maxLength:50,name:`attributes.${h}.key`,placeholder:"Enter value",rules:{...ae,pattern:{message:"Please avoid special characters, spaces and uppercase",value:Vt}}})}),t.jsx(F,{item:!0,xs:4,children:t.jsx(ye,{onSelect:f=>c(`attributes[${h}].type`,f==null?void 0:f.value),options:de,selectedValue:de.find(f=>f.value===m)})}),t.jsxs(F,{item:!0,xs:3,children:[t.jsx(Mt,{checked:C,disabled:!1,name:`attributes.${h}.required`,onChange:f=>c(`attributes[${h}].required`,f.target.checked),size:"small"}),t.jsx(fe,{onClick:()=>d(h),children:t.jsx(Ke,{})})]})]},u.id)})})}),t.jsx(g,{align:"flex-start",py:12,children:t.jsx(Y,{onClick:()=>l({key:"",type:"string",required:!0}),size:"medium",startIcon:t.jsx(we,{}),variant:"contained",children:"Add Attribute"})})]})},Ut=b(g)`
  max-height: 260px;
  overflow: auto;
`,qt=({parent:e})=>{const s=e;return t.jsxs(g,{children:[t.jsx(g,{direction:"row",mb:10,children:t.jsxs(F,{container:!0,spacing:2,children:[t.jsx(F,{item:!0,xs:5,children:t.jsx(Z,{style:{marginRight:180},children:"Attributes"})}),t.jsx(F,{item:!0,xs:4,children:t.jsx(Z,{style:{marginRight:130},children:"Type"})}),t.jsx(F,{item:!0,xs:3,children:t.jsx(Z,{children:"Required"})})]})}),s&&t.jsx(_t,{parentParam:s},s)]})},Z=b(R)`
  font-size: 15px;
  color: gray;
`,Kt={type:"",parent:""},Ht=async(e,s=!1)=>{try{const{attributes:n,...o}=e,r={...o,...Ue(n)};let a;if(s?a=await Q.put("/schema",JSON.stringify(r),{}):a=await Q.post("/schema",JSON.stringify(r),{}),a.error){const{message:l}=a.error;throw new Error(l)}}catch(n){let o=X;if(n.status===400){const r=await n.json();o=r.errorCode||(r==null?void 0:r.status)||X}else n instanceof Error&&(o=n.message);throw new Error(o)}},Yt=({onSchemaCreate:e,selectedSchema:s,onDelete:n})=>{const{close:o,visible:r}=L("addType"),a=xe({mode:"onChange",defaultValues:s?{type:s.type,parent:s.parent}:Kt}),{watch:l,setValue:p,reset:d}=a,[c,i]=x.useState(!1),[u,h]=x.useState(!1),[m,C]=x.useState(null);x.useEffect(()=>()=>{d()},[r,d]),x.useEffect(()=>{s||(async()=>{h(!0);try{const v=(await Pe()).schemas.filter($=>!$.is_deleted).map($=>($==null?void 0:$.type)==="thing"?{label:"No Parent",value:$.type}:{label:$.type,value:$.type});C(v)}catch(S){console.warn(S)}finally{h(!1)}})()},[s]);const f=l("parent"),A=()=>{o()},T=async()=>{if(s!=null&&s.type)try{await Q.delete(`/schema/${s.type}`),n(s.type),o()}catch(y){console.warn(y)}},N=a.handleSubmit(async y=>{i(!1);try{await Ht(y,!!s),e({type:y.type,parent:f||""}),A()}catch(S){if((S==null?void 0:S.status)===400){const v=await S.json();v.errorCode||v!=null&&v.status||X}else S instanceof Error&&S.message}finally{i(!1)}}),O=()=>m==null?void 0:m.find(y=>y.value===f);return t.jsx(me,{...a,children:t.jsxs("form",{id:"add-type-form",onSubmit:N,children:[t.jsxs(g,{children:[t.jsx(g,{align:"center",direction:"row",justify:"space-between",mb:18,children:t.jsx(g,{align:"center",direction:"row",children:t.jsx(R,{children:"Enter details"})})}),s?t.jsx(g,{mb:20,children:t.jsxs(R,{kind:"headingBold",children:["Parent: ",s.parent]})}):t.jsxs(t.Fragment,{children:[t.jsx(g,{mb:20,children:t.jsx(R,{children:"Select Parent"})}),t.jsx(g,{direction:"row",mb:20,children:t.jsx(ye,{autoFocus:!s,disabled:u,isLoading:u,onSelect:y=>p("parent",(y==null?void 0:y.value)||""),options:m,selectedValue:O()},f)})]}),s?t.jsx(g,{mb:20,children:t.jsxs(R,{kind:"headingBold",children:["Type: ",s.type]})}):t.jsxs(t.Fragment,{children:[t.jsx(g,{mb:4,children:t.jsx(R,{children:"Type name"})}),t.jsx(g,{mb:12,children:t.jsx(q,{id:"cy-item-name",maxLength:250,name:"type",placeholder:"Enter type name",rules:{...ae},value:f})})]})]}),t.jsx(qt,{parent:f}),t.jsxs(g,{direction:"row",justify:"space-between",mt:20,children:[s?t.jsx(Jt,{color:"secondary",onClick:T,size:"large",style:{marginRight:20},variant:"contained",children:"Delete"}):null,t.jsx(Y,{color:"secondary",disabled:c,onClick:N,size:"large",startIcon:c?t.jsx(H,{color:k.white,size:24}):null,variant:"contained",children:"Save"})]})]})})},Jt=b(Y)`
  && {
    color: ${k.primaryRed};
    background-color: rgba(237, 116, 116, 0.1);

    &:hover,
    &:active,
    &:focus {
      color: ${k.primaryRed};
      background-color: rgba(237, 116, 116, 0.2);
    }
  }
`,Zt=({onSchemaCreate:e,selectedSchema:s,onDelete:n,onClose:o})=>{const{close:r}=L("addType"),a=()=>{r(),o()};return t.jsx(ge,{id:"addType",kind:"regular",onClose:a,preventOutsideClose:!0,children:t.jsx(Yt,{onDelete:n,onSchemaCreate:e,selectedSchema:s})})};function Xt(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}const Qt=({schema:e,onOpenActions:s})=>t.jsxs(Xe,{children:[t.jsx(I,{className:"empty"}),t.jsx(I,{children:Xt(e.type??"")}),t.jsx(I,{children:t.jsx(fe,{disabled:(e==null?void 0:e.type)==="thing",onClick:()=>s(e),children:t.jsx(tt,{"data-testid":"EditIcon"})})})]}),es=x.memo(Qt),ts=({schemas:e,setSelectedSchema:s})=>{const{open:n}=L("addType"),[o,r]=Ee.useState(null),a=async()=>{n()},l=x.useCallback(i=>{n(),s(i)},[n,s]),p=()=>{r(null)},d=()=>{r(null),a()},c=!!o;return t.jsxs(t.Fragment,{children:[t.jsxs(st,{component:"table",children:[t.jsx(Qe,{children:t.jsxs(nt,{component:"tr",children:[t.jsx(I,{className:"empty"}),t.jsx(I,{children:"Type"}),t.jsx(I,{className:"empty"})]})}),t.jsx("tbody",{children:e==null?void 0:e.map(i=>t.jsx(es,{onOpenActions:l,schema:i},i==null?void 0:i.type))})]}),t.jsx(os,{anchorEl:o,anchorOrigin:{vertical:"bottom",horizontal:"right"},id:"schema-editor",onClose:p,open:c,transformOrigin:{vertical:"top",horizontal:"right"},children:t.jsxs(ns,{onClick:d,children:[t.jsx(et,{"data-testid":"EditTopicIcon"})," Edit"]})}),t.jsx(ss,{children:t.jsx(Y,{color:"secondary",endIcon:t.jsx(we,{}),onClick:a,size:"medium",type:"submit",variant:"contained",children:"Create New Type"})})]})},ss=b(g)`
  display: flex;
  margin: 20px 0px 0px 30px;
  width: 28%;
`,ns=b(g).attrs({direction:"row",px:12,py:8})`
  display: flex;
  align-items: center;
  justify-content: start;
  gap: 12px;
  cursor: pointer;
  background: ${k.BUTTON1};
  color: ${k.white};

  &:hover {
    background: ${k.BUTTON1_HOVER};
    color: ${k.GRAY3};
  }
`,os=b(Je)`
  && {
    z-index: 9999;
  }
  .MuiPaper-root {
    min-width: 149px;
    color: ${k.GRAY3};
    box-shadow: 0px 1px 6px 0px rgba(0, 0, 0, 0.2);
    border-radius: 6px;
    z-index: 1;
    font-family: Barlow;
    font-size: 14px;
    font-weight: 500;
  }
`,rs=()=>{const[e,s]=x.useState(!0),[n,o]=x.useState([]),[r,a]=x.useState(null);x.useEffect(()=>{(async()=>{try{const c=await Ae();o(c.schemas.filter(i=>!i.is_deleted)),s(!1)}catch(c){console.error("Error fetching data:",c),s(!1)}})()},[]);const l=d=>{o([...n,d])},p=d=>{o(n.filter(c=>c.type!==d))};return t.jsxs(t.Fragment,{children:[t.jsx(as,{align:e?"center":"flex-start",justify:e?"center":"flex-start",py:16,children:e?t.jsx(H,{color:k.white}):t.jsx(t.Fragment,{children:t.jsx(ts,{schemas:n,setSelectedSchema:a})})}),t.jsx(Zt,{onClose:()=>a(null),onDelete:p,onSchemaCreate:l,selectedSchema:r})]})},as=b(g)`
  min-height: 0;
  overflow: auto;
  flex: 1;
  width: 100%;
`,is=e=>{const{children:s,value:n,index:o,...r}=e;return n===o?t.jsx(hs,{"aria-labelledby":`simple-tab-${o}`,hidden:n!==o,id:`simple-tabpanel-${o}`,role:"tabpanel",...r,children:s}):null};function cs(e){return{id:`simple-tab-${e}`,"aria-controls":`simple-tabpanel-${e}`}}const ls=({onClose:e})=>{const[s,n]=x.useState(0),[o]=Me(i=>[i.isAdmin,i.setPubKey]),r=Ie(i=>i.customSchemaFlag),a=he(i=>i.appMetaData),l=()=>o?"Admin Settings":"Settings",p=({children:i})=>t.jsxs(ps,{children:[t.jsx(g,{direction:"row",pt:3,children:t.jsx(xs,{"data-testid":"setting-label",children:l()})}),i]}),d=(i,u)=>{n(u)},c=[...o?[{label:"General",component:Gt}]:[],{label:"Appearance",component:It},...o&&r?[{label:"Blueprint",component:rs}]:[]];return t.jsxs(gs,{direction:"column",children:[t.jsx(p,{children:t.jsx(ds,{"aria-label":"settings tabs",onChange:d,value:s,children:c.map((i,u)=>t.jsx(us,{disableRipple:!0,label:i.label,...cs(u)},i.label))})}),c.map((i,u)=>t.jsx(is,{index:u,value:s,children:t.jsx(i.component,{initialValues:a,onClose:e})},i.label))]})},ds=b(Le)`
  && {
    .MuiTabs-indicator {
      background: ${k.primaryBlue};
    }
    width: 90%;
  }
`,ps=b(g)`
  border-radius: 9px 9px 0 0;
  background: rgb(22, 24, 30);
  padding: 40px 36px 0 0;
`,us=b(Ve)`
  && {
    padding: 30px 0 24px;
    color: ${k.GRAY6};
    margin-left: 10px;
    font-family: Barlow;
    font-size: 16px;
    font-style: normal;
    font-weight: 500;
    text-align: center;

    &.Mui-selected {
      color: ${k.white};
    }
    flex-grow: 1;
  }
`,hs=b(g)`
  display: flex;
  flex: 1;
  min-height: 495px;
  max-height: 495px;
  height: fit-content;
  min-width: 480px;
`,gs=b(g)`
  min-height: 0;
  flex: 1;
`,xs=b(R)`
  font-size: 22px;
  font-weight: 600;
  font-family: Barlow;
  padding: 0 0 0 36px;
`,Ws=()=>{const{close:e}=L("settings"),{visible:s}=L("addItem");return s?null:t.jsx(ge,{background:"BG1",id:"settings",noWrap:!0,onClose:e,children:t.jsx(ls,{onClose:e})})};export{Ws as SettingsModal};
