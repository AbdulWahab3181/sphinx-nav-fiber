import{s as E,T as R,j as e,F as c,r as a,c as B}from"./index-5306a408.js";import{B as C}from"./index-b028ef43.js";import{u as k,a as I,B as j,j as L,ar as M,ak as y}from"./react-toastify.esm-2eb26066.js";import{T as O}from"./toastMessage-f73b557d.js";import{u as _}from"./index-4f2243af.js";import{S as b}from"./Skeleton-6c225593.js";import{C as z}from"./ClipLoader-9a18032d.js";import"./index.esm-86aae897.js";const A=()=>e.jsx(c,{children:e.jsx(c,{align:"center",direction:"row",justify:"space-between",mb:18,children:e.jsx(c,{align:"center",direction:"row",children:e.jsx(F,{children:"Remove node"})})})}),F=E(R)`
  font-size: 22px;
  font-weight: 600;
  font-family: 'Barlow';
`,u=(l,n)=>{y(e.jsx(O,{message:l}),{icon:!1,position:y.POSITION.BOTTOM_CENTER,type:n})},D=()=>{const{close:l}=_("removeNode"),[n,r]=a.useState(!1),[T,p]=k(o=>[o.removeNode,o.setSelectedNode]),[h,x]=a.useState(!1),[d,N]=a.useState(),[m,S]=a.useState(),s=I(),f=()=>{l()};a.useEffect(()=>{(async()=>{if(s){x(!0);try{if(s.type==="topic"){const{data:t}=await L({search:s==null?void 0:s.name}),i=t.find(w=>w.topic===s.name);S(i)}else N(s)}catch(t){console.log(t)}finally{x(!1)}}})()},[s]);const v=async()=>{r(!0);try{u("Topic node removal coming soon","info"),p(null),f()}catch(o){console.warn(o)}finally{r(!1)}},g=async()=>{let o="";const t=d||m;if(t){t!=null&&t.ref_id&&(o=t.ref_id),r(!0);try{await M(o),T(o),p(null),u("Removed Node","success"),f()}catch(i){console.log(i),u("Removed failed, try later","error"),console.warn(i)}finally{r(!1)}}};return e.jsxs(e.Fragment,{children:[e.jsx(A,{}),h?e.jsx(b,{}):e.jsxs(c,{direction:"row",justify:"space-between",children:[e.jsx(j,{color:"secondary",onClick:f,size:"medium",variant:"outlined",children:"Cancel"}),e.jsxs(j,{disabled:n||!d&&!m,onClick:d||m?g:v,size:"medium",variant:"text",children:["Confirm",n&&e.jsx(z,{color:B.BLUE_PRESS_STATE,size:10})]})]})]})},V=()=>e.jsx(C,{id:"removeNode",kind:"small",preventOutsideClose:!0,children:e.jsx(D,{})});export{V as RemoveNodeModal};
