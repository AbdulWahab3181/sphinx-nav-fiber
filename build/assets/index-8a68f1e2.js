import{_ as j,r as f,a as ee,j as n,c as N,u as ue,ag as K,ah as te,S as le,W as Ce,X as Be,s as b,F as g,T as R,h as ne,b as $,ai as Z,v as Q,i as Te,g as ze,k as Re}from"./index-b289d19f.js";import{B as he}from"./index-fd5f6c5e.js";import{u as L}from"./index-910cbaf3.js";import{g as se,a as oe,s as P,aD as Fe,aE as Ee,c as re,b as ae,av as Ne,e as Pe,X as Ae,t as ge,h as fe,z as Me,F as me,C as H,aF as Ie,Y as De,I as xe,B as Y,aG as Oe,aH as Ge,aI as We}from"./react-toastify.esm-4c5c25b4.js";import{B as be,T as Le,a as Ve}from"./index-a8890391.js";import{T as U}from"./index-1bb468a5.js";import{A as ye}from"./index-7fda5340.js";import{O as de,N as _e}from"./constants-cde8ebc3.js";import{D as qe}from"./DeleteIcon-879534c7.js";import{P as we}from"./PlusIcon-6c12ca41.js";import{e as Ue}from"./Stack-a8f794e1.js";import{u as Ke,a as He}from"./Popover-07994904.js";import{u as Ye}from"./Select-f232fda7.js";import{S as Xe,a as I,b as Je,E as Ze}from"./index-6f13e21c.js";import{E as Qe}from"./EditIcon-ddd3c3c9.js";import{M as et,a as tt}from"./ChevronUpIcon-699be255.js";import"./useSlotProps-8944b131.js";import"./index.esm-4cc9982e.js";import"./InfoIcon-05337e3a.js";import"./Popper-8f102aaf.js";import"./generateCategoricalChart-7b9d9936.js";import"./index-fc10c8cd.js";import"./CheckIcon-655ba42a.js";import"./ChevronDownIcon-8c7b31ef.js";function nt(e){return se("PrivateSwitchBase",e)}oe("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const st=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],ot=e=>{const{classes:t,checked:s,disabled:o,edge:r}=e,a={root:["root",s&&"checked",o&&"disabled",r&&`edge${N(r)}`],input:["input"]};return ae(a,nt,t)},rt=P(Fe)(({ownerState:e})=>j({padding:9,borderRadius:"50%"},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12})),at=P("input",{shouldForwardProp:Ee})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),it=f.forwardRef(function(t,s){const{autoFocus:o,checked:r,checkedIcon:a,className:l,defaultChecked:p,disabled:d,disableFocusRipple:c=!1,edge:i=!1,icon:u,id:h,inputProps:m,inputRef:C,name:x,onBlur:A,onChange:T,onFocus:E,readOnly:O,required:y=!1,tabIndex:S,type:v,value:k}=t,_=ee(t,st),[q,M]=Ye({controlled:r,default:!!p,name:"SwitchBase",state:"checked"}),z=Ke(),Se=B=>{E&&E(B),z&&z.onFocus&&z.onFocus(B)},ve=B=>{A&&A(B),z&&z.onBlur&&z.onBlur(B)},$e=B=>{if(B.nativeEvent.defaultPrevented)return;const ce=B.target.checked;M(ce),T&&T(B,ce)};let G=d;z&&typeof G>"u"&&(G=z.disabled);const ke=v==="checkbox"||v==="radio",X=j({},t,{checked:q,disabled:G,disableFocusRipple:c,edge:i}),ie=ot(X);return n.jsxs(rt,j({component:"span",className:re(ie.root,l),centerRipple:!0,focusRipple:!c,disabled:G,tabIndex:null,role:void 0,onFocus:Se,onBlur:ve,ownerState:X,ref:s},_,{children:[n.jsx(at,j({autoFocus:o,checked:r,defaultChecked:p,className:ie.input,disabled:G,id:ke?h:void 0,name:x,onChange:$e,readOnly:O,ref:C,required:y,ownerState:X,tabIndex:S,type:v},v==="checkbox"&&k===void 0?{}:{value:k},m)),q?a:u]}))}),ct=it,lt=f.createContext(),pe=lt;function dt(e){return se("MuiGrid",e)}const pt=[0,1,2,3,4,5,6,7,8,9,10],ut=["column-reverse","column","row-reverse","row"],ht=["nowrap","wrap-reverse","wrap"],W=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],gt=oe("MuiGrid",["root","container","item","zeroMinWidth",...pt.map(e=>`spacing-xs-${e}`),...ut.map(e=>`direction-xs-${e}`),...ht.map(e=>`wrap-xs-${e}`),...W.map(e=>`grid-xs-${e}`),...W.map(e=>`grid-sm-${e}`),...W.map(e=>`grid-md-${e}`),...W.map(e=>`grid-lg-${e}`),...W.map(e=>`grid-xl-${e}`)]),V=gt,ft=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function D(e){const t=parseFloat(e);return`${t}${String(e).replace(String(t),"")||"px"}`}function mt({theme:e,ownerState:t}){let s;return e.breakpoints.keys.reduce((o,r)=>{let a={};if(t[r]&&(s=t[r]),!s)return o;if(s===!0)a={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(s==="auto")a={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const l=K({values:t.columns,breakpoints:e.breakpoints.values}),p=typeof l=="object"?l[r]:l;if(p==null)return o;const d=`${Math.round(s/p*1e8)/1e6}%`;let c={};if(t.container&&t.item&&t.columnSpacing!==0){const i=e.spacing(t.columnSpacing);if(i!=="0px"){const u=`calc(${d} + ${D(i)})`;c={flexBasis:u,maxWidth:u}}}a=j({flexBasis:d,flexGrow:0,maxWidth:d},c)}return e.breakpoints.values[r]===0?Object.assign(o,a):o[e.breakpoints.up(r)]=a,o},{})}function xt({theme:e,ownerState:t}){const s=K({values:t.direction,breakpoints:e.breakpoints.values});return te({theme:e},s,o=>{const r={flexDirection:o};return o.indexOf("column")===0&&(r[`& > .${V.item}`]={maxWidth:"none"}),r})}function je({breakpoints:e,values:t}){let s="";Object.keys(t).forEach(r=>{s===""&&t[r]!==0&&(s=r)});const o=Object.keys(e).sort((r,a)=>e[r]-e[a]);return o.slice(0,o.indexOf(s))}function bt({theme:e,ownerState:t}){const{container:s,rowSpacing:o}=t;let r={};if(s&&o!==0){const a=K({values:o,breakpoints:e.breakpoints.values});let l;typeof a=="object"&&(l=je({breakpoints:e.breakpoints.values,values:a})),r=te({theme:e},a,(p,d)=>{var c;const i=e.spacing(p);return i!=="0px"?{marginTop:`-${D(i)}`,[`& > .${V.item}`]:{paddingTop:D(i)}}:(c=l)!=null&&c.includes(d)?{}:{marginTop:0,[`& > .${V.item}`]:{paddingTop:0}}})}return r}function yt({theme:e,ownerState:t}){const{container:s,columnSpacing:o}=t;let r={};if(s&&o!==0){const a=K({values:o,breakpoints:e.breakpoints.values});let l;typeof a=="object"&&(l=je({breakpoints:e.breakpoints.values,values:a})),r=te({theme:e},a,(p,d)=>{var c;const i=e.spacing(p);return i!=="0px"?{width:`calc(100% + ${D(i)})`,marginLeft:`-${D(i)}`,[`& > .${V.item}`]:{paddingLeft:D(i)}}:(c=l)!=null&&c.includes(d)?{}:{width:"100%",marginLeft:0,[`& > .${V.item}`]:{paddingLeft:0}}})}return r}function wt(e,t,s={}){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[s[`spacing-xs-${String(e)}`]];const o=[];return t.forEach(r=>{const a=e[r];Number(a)>0&&o.push(s[`spacing-${r}-${String(a)}`])}),o}const jt=P("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e,{container:o,direction:r,item:a,spacing:l,wrap:p,zeroMinWidth:d,breakpoints:c}=s;let i=[];o&&(i=wt(l,c,t));const u=[];return c.forEach(h=>{const m=s[h];m&&u.push(t[`grid-${h}-${String(m)}`])}),[t.root,o&&t.container,a&&t.item,d&&t.zeroMinWidth,...i,r!=="row"&&t[`direction-xs-${String(r)}`],p!=="wrap"&&t[`wrap-xs-${String(p)}`],...u]}})(({ownerState:e})=>j({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},e.wrap!=="wrap"&&{flexWrap:e.wrap}),xt,bt,yt,mt);function St(e,t){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[`spacing-xs-${String(e)}`];const s=[];return t.forEach(o=>{const r=e[o];if(Number(r)>0){const a=`spacing-${o}-${String(r)}`;s.push(a)}}),s}const vt=e=>{const{classes:t,container:s,direction:o,item:r,spacing:a,wrap:l,zeroMinWidth:p,breakpoints:d}=e;let c=[];s&&(c=St(a,d));const i=[];d.forEach(h=>{const m=e[h];m&&i.push(`grid-${h}-${String(m)}`)});const u={root:["root",s&&"container",r&&"item",p&&"zeroMinWidth",...c,o!=="row"&&`direction-xs-${String(o)}`,l!=="wrap"&&`wrap-xs-${String(l)}`,...i]};return ae(u,dt,t)},$t=f.forwardRef(function(t,s){const o=ue({props:t,name:"MuiGrid"}),{breakpoints:r}=Ne(),a=Ue(o),{className:l,columns:p,columnSpacing:d,component:c="div",container:i=!1,direction:u="row",item:h=!1,rowSpacing:m,spacing:C=0,wrap:x="wrap",zeroMinWidth:A=!1}=a,T=ee(a,ft),E=m||C,O=d||C,y=f.useContext(pe),S=i?p||12:y,v={},k=j({},T);r.keys.forEach(M=>{T[M]!=null&&(v[M]=T[M],delete k[M])});const _=j({},a,{columns:S,container:i,direction:u,item:h,rowSpacing:E,columnSpacing:O,wrap:x,zeroMinWidth:A,spacing:C},v,{breakpoints:r.keys}),q=vt(_);return n.jsx(pe.Provider,{value:S,children:n.jsx(jt,j({ownerState:_,className:re(q.root,l),as:c,ref:s},k))})}),F=$t;function kt(e){return se("MuiSwitch",e)}const Ct=oe("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),w=Ct,Bt=["className","color","edge","size","sx"],Tt=e=>{const{classes:t,edge:s,size:o,color:r,checked:a,disabled:l}=e,p={root:["root",s&&`edge${N(s)}`,`size${N(o)}`],switchBase:["switchBase",`color${N(r)}`,a&&"checked",l&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},d=ae(p,kt,t);return j({},t,d)},zt=P("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.edge&&t[`edge${N(s.edge)}`],t[`size${N(s.size)}`]]}})(({ownerState:e})=>j({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},e.edge==="start"&&{marginLeft:-8},e.edge==="end"&&{marginRight:-8},e.size==="small"&&{width:40,height:24,padding:7,[`& .${w.thumb}`]:{width:16,height:16},[`& .${w.switchBase}`]:{padding:4,[`&.${w.checked}`]:{transform:"translateX(16px)"}}})),Rt=P(ct,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.switchBase,{[`& .${w.input}`]:t.input},s.color!=="default"&&t[`color${N(s.color)}`]]}})(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${w.checked}`]:{transform:"translateX(20px)"},[`&.${w.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${w.checked} + .${w.track}`]:{opacity:.5},[`&.${w.disabled} + .${w.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:`${e.palette.mode==="light"?.12:.2}`},[`& .${w.input}`]:{left:"-100%",width:"300%"}}),({theme:e,ownerState:t})=>j({"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:le(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${w.checked}`]:{color:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:le(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${w.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${t.color}DisabledColor`]:`${e.palette.mode==="light"?Ce(e.palette[t.color].main,.62):Be(e.palette[t.color].main,.55)}`}},[`&.${w.checked} + .${w.track}`]:{backgroundColor:(e.vars||e).palette[t.color].main}})),Ft=P("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${e.palette.mode==="light"?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:`${e.palette.mode==="light"?.38:.3}`})),Et=P("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),Nt=f.forwardRef(function(t,s){const o=ue({props:t,name:"MuiSwitch"}),{className:r,color:a="primary",edge:l=!1,size:p="medium",sx:d}=o,c=ee(o,Bt),i=j({},o,{color:a,edge:l,size:p}),u=Tt(i),h=n.jsx(Et,{className:u.thumb,ownerState:i});return n.jsxs(zt,{className:re(u.root,r),sx:d,ownerState:i,children:[n.jsx(Rt,j({type:"checkbox",icon:h,checkedIcon:h,ref:s,ownerState:i},c,{classes:j({},u,{root:u.switchBase})})),n.jsx(Ft,{className:u.track,ownerState:i})]})}),Pt=Nt,At=({onClose:e})=>{const[t]=Pe(o=>[o.graphStyle]),s=()=>{localStorage.setItem("graphStyle",t),e()};return n.jsxs(Mt,{direction:"column",children:[n.jsx(It,{children:"Default graph view:"}),n.jsx(Ae,{}),n.jsx(g,{mt:308,children:n.jsx(be,{kind:"big",onClick:s,children:"Save changes"})})]})},Mt=b(g)`
  display: flex;
  gap: 10px;
  padding: 36px;
`,It=b(R)`
  font-family: Barlow;
  font-size: 13px;
  font-weight: 400;
`,Dt=({initialValues:e})=>{const t=ge({defaultValues:e,mode:"onSubmit"}),{isSubmitting:s}=t.formState,o=fe(a=>a.setAppMetaData),r=t.handleSubmit(async a=>{try{(await Me(a)).status==="success"&&o(a)}catch(l){console.log(l),console.warn(l)}});return n.jsx(me,{...t,children:n.jsx(Gt,{id:"add-node-form",onSubmit:r,children:n.jsxs(n.Fragment,{children:[n.jsxs(g,{children:[n.jsx(g,{pt:20,children:n.jsx(U,{id:"cy-about-title-id",label:"Graph Title",maxLength:50,name:"title",placeholder:"Type graph title here...",rules:{...ne}})}),n.jsx(g,{pt:20,children:n.jsx(U,{id:"cy-about-id",label:"Graph Description",maxLength:100,name:"description",placeholder:"Type graph description here..."})})]}),n.jsx(g,{mt:210,py:24,children:s?n.jsx(Ot,{children:n.jsx(H,{color:$.white,size:20})}):n.jsx(be,{disabled:s,id:"add-node-submit-cta",kind:"big",type:"submit",children:"Save changes"})})]})})})},Ot=b(g).attrs({align:"center",background:"primaryButton",borderRadius:8,justify:"center"})`
  padding: 16px 24px;
  opacity: 0.5;
`,Gt=b.form`
  padding: 36px;
`;function Wt(e){const t={};return e.forEach(s=>{const{key:o,type:r,required:a}=s;a?t[o]=r:t[o]=`?${r}`}),t}function Lt(e){return Object.keys(e).map(t=>({required:!e[t].includes("?"),type:e[t].includes("?")?e[t].slice(1):e[t],key:t})).filter(({key:t})=>!["type","ref_id","parent"].includes(t))}const Vt=/^[a-z]+$/,_t=({parentParam:e})=>{const[t,s]=f.useState(!1),[o,r]=f.useState([]),{fields:a,append:l,replace:p,remove:d}=Ie({name:"attributes"}),{setValue:c,watch:i}=De();return f.useEffect(()=>{const u=async()=>{try{let h=[{required:!1,type:"string",key:""}];if(e!==_e.value.toLowerCase()){s(!0);const m=await Oe(e);h=Lt(m)}p(h),r(h)}catch(h){console.warn(h)}finally{s(!1)}};o.length===0&&u()},[e,c,p,o.length]),n.jsxs(n.Fragment,{children:[t?n.jsx(g,{align:"center",children:n.jsx(H,{color:$.SECONDARY_BLUE,size:"30"})}):n.jsx(qt,{py:8,children:n.jsx(F,{container:!0,spacing:2,children:a.map((u,h)=>{const m=i(`attributes[${h}].type`),C=i(`attributes[${h}].required`);return n.jsxs(f.Fragment,{children:[n.jsx(F,{item:!0,xs:5,children:n.jsx(U,{autoComplete:"off",className:"text-input",id:"cy-item-name",maxLength:50,name:`attributes.${h}.key`,placeholder:"Enter value",rules:{...ne,pattern:{message:"Please use lower case and remove spaces",value:Vt}}})}),n.jsx(F,{item:!0,xs:4,children:n.jsx(ye,{onSelect:x=>c(`attributes[${h}].type`,x==null?void 0:x.value),options:de,selectedValue:de.find(x=>x.value===m)})}),n.jsxs(F,{item:!0,xs:3,children:[n.jsx(Pt,{checked:C,disabled:!1,name:`attributes.${h}.required`,onChange:x=>c(`attributes[${h}].required`,x.target.checked),size:"small"}),n.jsx(xe,{onClick:()=>d(h),children:n.jsx(qe,{})})]})]},u.id)})})}),n.jsx(g,{align:"flex-start",py:12,children:n.jsx(Y,{onClick:()=>l({key:"",type:"string",required:!0}),size:"medium",startIcon:n.jsx(we,{}),variant:"contained",children:"Add Attribute"})})]})},qt=b(g)`
  max-height: 260px;
  overflow: auto;
`,Ut=({parent:e})=>{const t=e;return n.jsxs(g,{children:[n.jsx(g,{direction:"row",mb:10,children:n.jsxs(F,{container:!0,spacing:2,children:[n.jsx(F,{item:!0,xs:5,children:n.jsx(J,{style:{marginRight:180},children:"Attributes"})}),n.jsx(F,{item:!0,xs:4,children:n.jsx(J,{style:{marginRight:130},children:"Type"})}),n.jsx(F,{item:!0,xs:3,children:n.jsx(J,{children:"Required"})})]})}),t&&n.jsx(_t,{parentParam:t},t)]})},J=b(R)`
  font-size: 15px;
  color: gray;
`,Kt={type:"",parent:""},Ht=async(e,t=!1)=>{try{const{attributes:s,...o}=e,r={...o,...Wt(s)};let a;if(t?a=await Q.put("/schema",JSON.stringify(r),{}):a=await Q.post("/schema",JSON.stringify(r),{}),a.error){const{message:l}=a.error;throw new Error(l)}}catch(s){let o=Z;if(s.status===400){const r=await s.json();o=r.errorCode||(r==null?void 0:r.status)||Z}else s instanceof Error&&(o=s.message);throw new Error(o)}},Yt=({onSchemaCreate:e,selectedSchema:t,onDelete:s})=>{const{close:o,visible:r}=L("addType"),a=ge({mode:"onChange",defaultValues:t?{type:t.type,parent:t.parent}:Kt}),{watch:l,setValue:p,reset:d}=a,[c,i]=f.useState(!1),[u,h]=f.useState(!1),[m,C]=f.useState(null);f.useEffect(()=>()=>{d()},[r,d]),f.useEffect(()=>{t||(async()=>{h(!0);try{const v=(await Ge()).schemas.map(k=>(k==null?void 0:k.type)==="thing"?{label:"No Parent",value:k.type}:{label:k.type,value:k.type});C(v)}catch(S){console.warn(S)}finally{h(!1)}})()},[t]);const x=l("parent"),A=()=>{o()},T=async()=>{if(t!=null&&t.type)try{await Q.delete(`/schema/${t.type}`),s(t.type),o()}catch(y){console.warn(y)}},E=a.handleSubmit(async y=>{i(!1);try{await Ht(y,!!t),e({type:y.type,parent:x||""}),A()}catch(S){if((S==null?void 0:S.status)===400){const v=await S.json();v.errorCode||v!=null&&v.status||Z}else S instanceof Error&&S.message}finally{i(!1)}}),O=()=>m==null?void 0:m.find(y=>y.value===x);return n.jsx(me,{...a,children:n.jsxs("form",{id:"add-type-form",onSubmit:E,children:[n.jsxs(g,{children:[n.jsx(g,{align:"center",direction:"row",justify:"space-between",mb:18,children:n.jsx(g,{align:"center",direction:"row",children:n.jsx(R,{children:"Enter details"})})}),t?n.jsx(g,{mb:20,children:n.jsxs(R,{kind:"headingBold",children:["Parent: ",t.parent]})}):n.jsxs(n.Fragment,{children:[n.jsx(g,{mb:20,children:n.jsx(R,{children:"Select Parent"})}),n.jsx(g,{direction:"row",mb:20,children:n.jsx(ye,{autoFocus:!t,disabled:u,isLoading:u,onSelect:y=>p("parent",(y==null?void 0:y.value)||""),options:m,selectedValue:O()},x)})]}),t?n.jsx(g,{mb:20,children:n.jsxs(R,{kind:"headingBold",children:["Type: ",t.type]})}):n.jsxs(n.Fragment,{children:[n.jsx(g,{mb:4,children:n.jsx(R,{children:"Type name"})}),n.jsx(g,{mb:12,children:n.jsx(U,{id:"cy-item-name",maxLength:250,name:"type",placeholder:"Enter type name",rules:{...ne},value:x})})]})]}),n.jsx(Ut,{parent:x}),n.jsxs(g,{direction:"row",justify:"space-between",mt:20,children:[t?n.jsx(Xt,{color:"secondary",onClick:T,size:"large",style:{marginRight:20},variant:"contained",children:"Delete"}):null,n.jsx(Y,{color:"secondary",disabled:c,onClick:E,size:"large",startIcon:c?n.jsx(H,{color:$.white,size:24}):null,variant:"contained",children:"Save"})]})]})})},Xt=b(Y)`
  && {
    color: ${$.primaryRed};
    background-color: rgba(237, 116, 116, 0.1);

    &:hover,
    &:active,
    &:focus {
      color: ${$.primaryRed};
      background-color: rgba(237, 116, 116, 0.2);
    }
  }
`,Jt=({onSchemaCreate:e,selectedSchema:t,onDelete:s,onClose:o})=>{const{close:r}=L("addType"),a=()=>{r(),o()};return n.jsx(he,{id:"addType",kind:"regular",onClose:a,preventOutsideClose:!0,children:n.jsx(Yt,{onDelete:s,onSchemaCreate:e,selectedSchema:t})})};function Zt(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}const Qt=({schema:e,onOpenActions:t})=>n.jsxs(Xe,{children:[n.jsx(I,{className:"empty"}),n.jsx(I,{children:Zt(e.type??"")}),n.jsx(I,{children:n.jsx(xe,{disabled:(e==null?void 0:e.type)==="thing",onClick:()=>t(e),children:n.jsx(Qe,{"data-testid":"EditIcon"})})})]}),en=f.memo(Qt),tn=({schemas:e,setSelectedSchema:t})=>{const{open:s}=L("addType"),[o,r]=Te.useState(null),a=async()=>{s()},l=f.useCallback(i=>{s(),t(i)},[s,t]),p=()=>{r(null)},d=()=>{r(null),a()},c=!!o;return n.jsxs(n.Fragment,{children:[n.jsxs(et,{component:"table",children:[n.jsx(Je,{children:n.jsxs(tt,{component:"tr",children:[n.jsx(I,{className:"empty"}),n.jsx(I,{children:"Type"}),n.jsx(I,{className:"empty"})]})}),n.jsx("tbody",{children:e==null?void 0:e.map(i=>n.jsx(en,{onOpenActions:l,schema:i},i==null?void 0:i.type))})]}),n.jsx(on,{anchorEl:o,anchorOrigin:{vertical:"bottom",horizontal:"right"},id:"schema-editor",onClose:p,open:c,transformOrigin:{vertical:"top",horizontal:"right"},children:n.jsxs(sn,{onClick:d,children:[n.jsx(Ze,{"data-testid":"EditTopicIcon"})," Edit"]})}),n.jsx(nn,{children:n.jsx(Y,{color:"secondary",endIcon:n.jsx(we,{}),onClick:a,size:"medium",type:"submit",variant:"contained",children:"Create New Type"})})]})},nn=b(g)`
  display: flex;
  margin: 20px 0px 0px 30px;
  width: 28%;
`,sn=b(g).attrs({direction:"row",px:12,py:8})`
  display: flex;
  align-items: center;
  justify-content: start;
  gap: 12px;
  cursor: pointer;
  background: ${$.BUTTON1};
  color: ${$.white};

  &:hover {
    background: ${$.BUTTON1_HOVER};
    color: ${$.GRAY3};
  }
`,on=b(He)`
  && {
    z-index: 9999;
  }
  .MuiPaper-root {
    min-width: 149px;
    color: ${$.GRAY3};
    box-shadow: 0px 1px 6px 0px rgba(0, 0, 0, 0.2);
    border-radius: 6px;
    z-index: 1;
    font-family: Barlow;
    font-size: 14px;
    font-weight: 500;
  }
`,rn=()=>{const[e,t]=f.useState(!0),[s,o]=f.useState([]),[r,a]=f.useState(null);f.useEffect(()=>{(async()=>{try{const c=await We();o(c.schemas.filter(i=>!i.is_deleted)),t(!1)}catch(c){console.error("Error fetching data:",c),t(!1)}})()},[]);const l=d=>{o([...s,d])},p=d=>{o(s.filter(c=>c.type!==d))};return n.jsxs(n.Fragment,{children:[n.jsx(an,{align:e?"center":"flex-start",justify:e?"center":"flex-start",py:16,children:e?n.jsx(H,{color:$.white}):n.jsx(n.Fragment,{children:n.jsx(tn,{schemas:s,setSelectedSchema:a})})}),n.jsx(Jt,{onClose:()=>a(null),onDelete:p,onSchemaCreate:l,selectedSchema:r})]})},an=b(g)`
  min-height: 0;
  overflow: auto;
  flex: 1;
  width: 100%;
`,cn=e=>{const{children:t,value:s,index:o,...r}=e;return s===o?n.jsx(gn,{"aria-labelledby":`simple-tab-${o}`,hidden:s!==o,id:`simple-tabpanel-${o}`,role:"tabpanel",...r,children:t}):null};function ln(e){return{id:`simple-tab-${e}`,"aria-controls":`simple-tabpanel-${e}`}}const dn=({onClose:e})=>{const[t,s]=f.useState(0),[o]=ze(i=>[i.isAdmin,i.setPubKey]),r=Re(i=>i.customSchemaFlag),a=fe(i=>i.appMetaData),l=()=>o?"Admin Settings":"Settings",p=({children:i})=>n.jsxs(un,{children:[n.jsx(g,{direction:"row",pt:3,children:n.jsx(mn,{"data-testid":"setting-label",children:l()})}),i]}),d=(i,u)=>{s(u)},c=[...o?[{label:"General",component:Dt}]:[],{label:"Appearance",component:At},{label:"Graph Blueprint",component:rn}];return n.jsxs(fn,{direction:"column",children:[n.jsx(p,{children:n.jsx(pn,{"aria-label":"settings tabs",onChange:d,value:t,children:c.map((i,u)=>n.jsx(hn,{disableRipple:!0,label:i.label,...ln(u)},i.label))})}),c.map((i,u)=>n.jsx(cn,{index:u,value:t,children:n.jsx(i.component,{initialValues:a,onClose:e})},i.label))]})},pn=b(Le)`
  && {
    .MuiTabs-indicator {
      background: ${$.primaryBlue};
    }
    width: 90%;
  }
`,un=b(g)`
  background: rgb(22, 24, 30);
  padding: 40px 36px 0 0;
`,hn=b(Ve)`
  && {
    padding: 30px 0 24px;
    color: ${$.GRAY6};
    margin-left: 10px;
    font-family: Barlow;
    font-size: 16px;
    font-style: normal;
    font-weight: 500;
    text-align: center;

    &.Mui-selected {
      color: ${$.white};
    }
    flex-grow: 1;
  }
`,gn=b(g)`
  display: flex;
  flex: 1;
  min-height: 495px;
  max-height: 495px;
  height: fit-content;
  min-width: 480px;
`,fn=b(g)`
  min-height: 0;
  flex: 1;
`,mn=b(R)`
  font-size: 22px;
  font-weight: 600;
  font-family: Barlow;
  padding: 0 0 0 36px;
`,Wn=()=>{const{close:e}=L("settings"),{visible:t}=L("addItem");return t?null:n.jsx(he,{background:"BG1",id:"settings",noWrap:!0,onClose:e,children:n.jsx(dn,{onClose:e})})};export{Wn as SettingsModal};
