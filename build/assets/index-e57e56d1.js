import{Y as E,Z as C,j as e,X as c,r as a,a0 as R,aP as b}from"./index-78c3eadc.js";import{u as B,aA as O,az as _,bP as p,cb as z,cu as I,cw as L,bZ as x,cc as M}from"./index-dfd4cdb4.js";import{T as k}from"./toastMessage-95715b48.js";import{S as A}from"./Skeleton-a3466ddb.js";const P=()=>e.jsx(c,{children:e.jsx(c,{align:"center",direction:"row",justify:"space-between",mb:18,children:e.jsx(c,{align:"center",direction:"row",children:e.jsx(D,{children:"Remove node"})})})}),D=E(C)`
  font-size: 22px;
  font-weight: 600;
  font-family: 'Barlow';
`,y=i=>{x(e.jsx(k,{message:i}),{icon:!1,position:x.POSITION.BOTTOM_CENTER,type:i===b?"success":"error"})},F=()=>{const{close:i}=B("removeNode"),[d,r]=a.useState(!1),[S,f]=O(s=>[s.removeNode,s.setSelectedNode]),[j,m]=a.useState(!1),[o,T]=a.useState(),[u,h]=a.useState(),t=_(),l=()=>{i()};a.useEffect(()=>{(async()=>{if(t){m(!0);try{if(t.type==="topic"){const{data:n}=await I({search:t==null?void 0:t.name}),g=n.find(N=>N.topic===t.name);h(g)}else T(t)}catch(n){console.log(n)}finally{m(!1)}}})()},[t]);const v=async()=>{r(!0);try{y("Topic node removal coming soon"),f(null),l()}catch(s){console.warn(s)}finally{r(!1)}},w=async()=>{let s="";if(o!=null&&o.ref_id)s=o.ref_id;else if(o!=null&&o.id)s=o.id;else return;r(!0);try{await L(s),S(o),f(null),y("Removed Node"),l()}catch(n){console.warn(n)}finally{r(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(P,{}),j?e.jsx(A,{}):e.jsxs(c,{direction:"row",justify:"space-between",children:[e.jsx(p,{color:"secondary",onClick:l,size:"medium",variant:"outlined",children:"Cancel"}),e.jsxs(p,{disabled:d||!o&&!u,onClick:o&&!u?w:v,size:"medium",variant:"text",children:["Confirm",d&&e.jsx(z,{color:R.BLUE_PRESS_STATE,size:10})]})]})]})},Y=()=>e.jsx(M,{id:"removeNode",kind:"small",preventOutsideClose:!0,children:e.jsx(F,{})});export{Y as RemoveNodeModal};
