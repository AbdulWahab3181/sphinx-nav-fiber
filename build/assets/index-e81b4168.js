import{s as E,T as R,j as e,F as c,r as a,c as B}from"./index-f76464f2.js";import{B as C}from"./index-47dde8aa.js";import{u as I,a as L,B as j,j as M,an as O,af as y}from"./react-toastify.esm-bb128754.js";import{T as _}from"./toastMessage-3f5b8d92.js";import{u as b}from"./index-9c3b490f.js";import{S as k}from"./Skeleton-d45c4af6.js";import{C as z}from"./ClipLoader-634bea35.js";import"./index.esm-a945e31d.js";const A=()=>e.jsx(c,{children:e.jsx(c,{align:"center",direction:"row",justify:"space-between",mb:18,children:e.jsx(c,{align:"center",direction:"row",children:e.jsx(F,{children:"Remove node"})})})}),F=E(R)`
  font-size: 22px;
  font-weight: 600;
  font-family: 'Barlow';
`,u=(l,n)=>{y(e.jsx(_,{message:l}),{icon:!1,position:y.POSITION.BOTTOM_CENTER,type:n})},D=()=>{const{close:l}=b("removeNode"),[n,r]=a.useState(!1),[T,p]=I(o=>[o.removeNode,o.setSelectedNode]),[h,x]=a.useState(!1),[d,N]=a.useState(),[m,S]=a.useState(),s=L(),f=()=>{l()};a.useEffect(()=>{(async()=>{if(s){x(!0);try{if(s.type==="topic"){const{data:t}=await M({search:s==null?void 0:s.name}),i=t.find(w=>w.topic===s.name);S(i)}else N(s)}catch(t){console.log(t)}finally{x(!1)}}})()},[s]);const v=async()=>{r(!0);try{u("Topic node removal coming soon","info"),p(null),f()}catch(o){console.warn(o)}finally{r(!1)}},g=async()=>{let o="";const t=d||m;if(t){t!=null&&t.ref_id&&(o=t.ref_id),r(!0);try{await O(o),T(o),p(null),u("Removed Node","success"),f()}catch(i){console.log(i),u("Removed failed, try later","error"),console.warn(i)}finally{r(!1)}}};return e.jsxs(e.Fragment,{children:[e.jsx(A,{}),h?e.jsx(k,{}):e.jsxs(c,{direction:"row",justify:"space-between",children:[e.jsx(j,{color:"secondary",onClick:f,size:"medium",variant:"outlined",children:"Cancel"}),e.jsxs(j,{disabled:n||!d&&!m,onClick:d||m?g:v,size:"medium",variant:"text",children:["Confirm",n&&e.jsx(z,{color:B.BLUE_PRESS_STATE,size:10})]})]})]})},V=()=>e.jsx(C,{id:"removeNode",kind:"small",preventOutsideClose:!0,children:e.jsx(D,{})});export{V as RemoveNodeModal};
